{
  "openapi": "3.0.0",
  "info": {
    "title": "X-road services consumed by Pääsuke",
    "description": "<p>X-road service definitions that are standardized by Pääsuke but offered by other parties (like Tax and Customs Board) and consumed by Pääsuke.</p><p>To download the API descriptions from the right menu choose either Export -&gt; Download API -&gt; YAML Resolved (or JSON Resolved) or you can export a server stub in your favourite programming language.</p>More info can be found at <a href=\"https://github.com/e-gov/PH/\">github.com/e-gov/PH</a>.",
    "license": {
      "name": "Licensed under Apache 2.0 license",
      "url": "https://www.apache.org/licenses/LICENSE-2.0.html"
    },
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://virtserver.swaggerhub.com/aasaru/x-road-services-consumed-by-paasuke/1.0.0",
      "description": "SwaggerHub API Auto Mocking"
    }
  ],
  "paths": {
    "/delegates/{delegate}/representees/mandates": {
      "get": {
        "summary": "List persons the delegate can represent. Mandates (roles) are included in the response.",
        "description": "",
        "operationId": "getMandatesByDelegate",
        "parameters": [
          {
            "name": "delegate",
            "in": "path",
            "description": "<b>Identifier of the delegate (volituste saaja).</b> Can be one of the follwing&colon; <p>a)  'EE' followed by 8-digit legal entity code from Estonian Business Registry</p> <p>b) 'EE' followed by 11-digit national identity number</p> <p>c) Two-letter country code followed by eIDAS identification (1...254 symbols) - Pääsuke uses the value that was returned by Tara when the person logged into eesti.ee portal.</p>",
            "required": true,
            "style": "simple",
            "explode": false,
            "schema": {
              "type": "string"
            },
            "example": "EE38302250123"
          },
          {
            "name": "subDelegatedBy",
            "in": "query",
            "description": "<p><b>To add a filter to results so that only mandates that were sub-delegated to the delegate by this person (edasivolitaja) would be returned.</b></p>\n<p>This is to cover the following use case. Let's say LittleCompany and BigCompany are customers of BookkeepingCompany and have created some mandates to this company together with the right for BookkeepingCompany to further sub-delegate the mandates to its employees. BookkeepingCompany has further sub-delegated mandates to some of its employees.</p>\n<p>BookkeepingCompany can use this query to find out for an employee what kind of customer mandates have been sub-delegated to that employee.</p>\n<p>To display this list Pääsuke makes a query  where delegate={EmployeeIdentifier} and subDelegatedBy={BookkeepingCompanyIdentifier}.</p>",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "EE10391132"
          },
          {
            "name": "X-Road-UserId",
            "in": "header",
            "description": "User identifier whose action initiated the request. This also can be an employee of RIA using some back-end.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "EE39912310123"
          },
          {
            "name": "X-Road-Represented-Party",
            "in": "header",
            "description": "When service client represents third party while issuing a query then it must be filled with identifier of that third party. When service client represents itself then this header is omitted.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "EE12345678"
          },
          {
            "name": "X-Road-Id",
            "in": "header",
            "description": "Unique identifier (UUID) for this message.",
            "schema": {
              "type": "string"
            },
            "example": "123e4567-e89b-12d3-a456-42661417400"
          },
          {
            "name": "ns",
            "in": "query",
            "description": "Systems that only serve mandates from a single namespace can ignore this parameter.",
            "required": false,
            "style": "form",
            "explode": true,
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "example": "ANNUAL_REPORTS"
              }
            },
            "example": "ANNUAL_REPORTS"
          }
        ],
        "responses": {
          "200": {
            "description": "MandateTriplets that match query parameters. If there are no mandates to return for this representee or delegate then empty list should be returned. MandateTriplet consists of 3 parts&colon;\n<ol>\n  <li>representee (volitaja)</li>\n  <li>delegate (volitatu)</li>\n  <li>list of mandates that are currently valid or become valid in the future.</li></ol>\nProperties of a mandate:\n<ul>\n  <li><b>role</b></li>\n  <li><b>validityPeriod</b> - if this value is present it must have either validFrom, validThrough or both. If the valid through date is in the past the mandate must not be returned at all. The value of validThrough must be to the last date the mandate is valid (like 31.12.2029). If the mandate is valid indefinitely then validThrough must be omitted.</li>\n  <li><b>subDelegable</b> - true if this mandate was created with the right to futher sub-delegate it, false otherwise.</li>\n  <li><b>subDelegatorIdentifier</b> - precence of this value indicates that this mandate has been created by adding a sub-delegate to some other mandate. The value of this property indicates who was the delegate of the original mandate.</li>\n  </ul>\n",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/MandateTriplet"
                  }
                },
                "example": [
                  {
                    "representee": {
                      "type": "LEGAL_PERSON",
                      "legalName": "Väikefirma OÜ",
                      "identifier": "EE12345678"
                    },
                    "delegate": {
                      "type": "NATURAL_PERSON",
                      "firstName": "Jüri",
                      "surname": "Juurikas",
                      "identifier": "EE38302250123"
                    },
                    "mandates": [
                      {
                        "role": "EMTA:HAMPI",
                        "validityPeriod": {
                          "from": "2017-07-21",
                          "through": "2028-12-31"
                        },
                        "subDelegable": false,
                        "subDelegatorIdentifier": "EE12345678",
                        "links": {
                          "delete": "/v1/nss/EMTA/representees/int-EE12345678/delegates/int-EE38302250123/mandates/int-mandate-123",
                          "addSubDelegate": "/v1/nss/EMTA/representees/int-EE12345678/delegates/int-EE38302250123/mandates/int-mandate-123/subdelegates",
                          "origin": "https://vaarikas.emta.ee/view/int-mandate-123"
                        }
                      },
                      {
                        "role": "PAASUKE_EXTERNAL:PRIA:unrestricted",
                        "validityPeriod": {
                          "from": "2017-07-21",
                          "through": "2028-12-31"
                        },
                        "hidden": true
                      }
                    ]
                  }
                ]
              }
            }
          },
          "400": {
            "description": "bad input parameter"
          },
          "403": {
            "description": "Forbidden. Request not authorized..."
          }
        }
      }
    },
    "/representees/{representee}/delegates/mandates": {
      "get": {
        "summary": "List delegates who have any mandates that are currently valid or become valid in the future.",
        "description": "",
        "operationId": "getMandatesByRepresentee",
        "parameters": [
          {
            "name": "representee",
            "in": "path",
            "description": "<b>Identifier of the representee (volitaja).</b> Can be one of the follwing&colon; <p>a)  'EE' followed by 8-digit legal entity code from Estonian Business Registry</p> <p>b) 'EE' followed by 11-digit national identity number</p> <p>c) Two-letter country code followed by eIDAS identification (1...254 symbols) - Pääsuke uses the value that was returned by Tara when the person logged into eesti.ee portal.</p>",
            "required": true,
            "style": "simple",
            "explode": false,
            "schema": {
              "type": "string"
            },
            "example": "EE10391131"
          },
          {
            "name": "delegate",
            "in": "query",
            "description": "Only return mandates with this delegate (volitatu). This is used for TÖR queries.",
            "required": false,
            "style": "form",
            "explode": true,
            "schema": {
              "type": "string"
            },
            "example": "EE10391132"
          },
          {
            "name": "ns",
            "in": "query",
            "description": "Only return mandates with specified namespace. Systems that only serve mandates from a single namespace can ignore this parameter.",
            "required": false,
            "style": "form",
            "explode": true,
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "example": "BR_REPRIGHT"
              }
            },
            "example": "ANNUAL_REPORTS"
          },
          {
            "name": "subDelegatedBy",
            "in": "query",
            "description": "<p><b>To add a filter to results so that only mandates that were sub-delegated by this person (edasivolitaja) would be returned.</b></p>\n<p>This is to cover the following use case. Let's say LittleCompany has given BookkeepingCompany some role together with the right for BookkeepingCompany to further sub-delegate the role to its employees.</p>\n<p>BookkeepingCompany can use this query to get the list of its employees who have received this role from BookkeepingCompany through sub-delegation.</p>\n<p>To display this list Pääsuke makes a query  where representee={LittleCompanyIdentifier} and subDelegatedBy={BookkeepingCompanyIdentifier}.</p>",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "EE10391132"
          },
          {
            "name": "X-Road-UserId",
            "in": "header",
            "description": "User identifier whose action initiated the request. This also can be an employee of RIA using some back-end.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "EE39912310123"
          },
          {
            "name": "X-Road-Represented-Party",
            "in": "header",
            "description": "When service client represents third party while issuing a query then it must be filled with identifier of that third party. When service client represents itself then this header is omitted.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "EE12345678"
          },
          {
            "name": "X-Road-Id",
            "in": "header",
            "description": "Unique identifier (UUID) for this message.",
            "schema": {
              "type": "string"
            },
            "example": "123e4567-e89b-12d3-a456-42661417400"
          }
        ],
        "responses": {
          "200": {
            "description": "MandateTriplets that match query parameters. If there are no mandates to return for this representee or delegate then empty list should be returned. MandateTriplet consists of 3 parts&colon;\n<ol>\n  <li>representee (volitaja)</li>\n  <li>delegate (volitatu)</li>\n  <li>list of mandates that are currently valid or become valid in the future.</li></ol>\nProperties of a mandate:\n<ul>\n  <li><b>role</b></li>\n  <li><b>validityPeriod</b> - if this value is present it must have either validFrom, validThrough or both. If the valid through date is in the past the mandate must not be returned at all. The value of validThrough must be to the last date the mandate is valid (like 31.12.2029). If the mandate is valid indefinitely then validThrough must be omitted.</li>\n  <li><b>subDelegable</b> - true if this mandate was created with the right to futher sub-delegate it, false otherwise.</li>\n  <li><b>subDelegatorIdentifier</b> - precence of this value indicates that this mandate has been created by adding a sub-delegate to some other mandate. The value of this property indicates who was the delegate of the original mandate.</li>\n  </ul>\n",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/MandateTriplet"
                  }
                },
                "example": [
                  {
                    "representee": {
                      "type": "LEGAL_PERSON",
                      "legalName": "Väikefirma OÜ",
                      "identifier": "EE12345678"
                    },
                    "delegate": {
                      "type": "NATURAL_PERSON",
                      "firstName": "Jüri",
                      "surname": "Juurikas",
                      "identifier": "EE38302250123"
                    },
                    "mandates": [
                      {
                        "role": "EMTA:HAMPI",
                        "validityPeriod": {
                          "from": "2017-07-21",
                          "through": "2028-12-31"
                        },
                        "subDelegable": false,
                        "subDelegatorIdentifier": "EE12345678",
                        "links": {
                          "delete": "/v1/nss/EMTA/representees/int-EE12345678/delegates/int-EE38302250123/mandates/int-mandate-123",
                          "addSubDelegate": "/v1/nss/EMTA/representees/int-EE12345678/delegates/int-EE38302250123/mandates/int-mandate-123/subdelegates",
                          "origin": "https://vaarikas.emta.ee/view/int-mandate-123"
                        }
                      },
                      {
                        "role": "PAASUKE_EXTERNAL:PRIA:unrestricted",
                        "validityPeriod": {
                          "from": "2017-07-21",
                          "through": "2028-12-31"
                        },
                        "hidden": true
                      }
                    ]
                  }
                ]
              }
            }
          },
          "400": {
            "description": "Bad input parameter"
          },
          "403": {
            "description": "Forbidden. Request not authorized."
          },
          "422": {
            "description": "Unprocessable request. Something went wrong.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Problem"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/representees/{representee}/delegates/{delegate}/mandates": {
      "post": {
        "summary": "Add a mandate to a delegate under a representee",
        "description": "<p>This query is for the following use-case. The end user (in our example EE39912310123) logs into Pääsuke (that runs under www.eesti.ee) and adds a mandate from there (for example the end user adds \"GLOBAL1_EMTA:ACCOUNTANT\" role (with the right to further sub-delegate it) for the company accountant Jüri Juurikas). After end user confirms adding of the mandate then Pääsuke makes this POST request for each mandate.</p> <p>NB! The end user can only add mandates that have assignableBy in the role definition and the end user must have one of the roles.</p>\n",
        "operationId": "addMandate",
        "parameters": [
          {
            "name": "representee",
            "in": "path",
            "description": "<b>Identifier of the representee (volitaja).</b> Can be one of the follwing&colon; <p>a)  'EE' followed by 8-digit legal entity code from Estonian Business Registry</p> <p>b) 'EE' followed by 11-digit national identity number</p> <p>c) Two-letter country code followed by eIDAS identification (1...254 symbols) - Pääsuke uses the value that was returned by Tara when the person logged into eesti.ee portal.</p>",
            "required": true,
            "style": "simple",
            "explode": false,
            "schema": {
              "type": "string"
            },
            "example": "EE10391131"
          },
          {
            "name": "delegate",
            "in": "path",
            "description": "<b>Identifier of the delegate (volituste saaja).</b> Can be one of the follwing&colon; <p>a)  'EE' followed by 8-digit legal entity code from Estonian Business Registry</p> <p>b) 'EE' followed by 11-digit national identity number</p> <p>c) Two-letter country code followed by eIDAS identification (1...254 symbols) - Pääsuke uses the value that was returned by Tara when the person logged into eesti.ee portal.</p>",
            "required": true,
            "style": "simple",
            "explode": false,
            "schema": {
              "type": "string"
            },
            "example": "EE38302250123"
          },
          {
            "name": "X-Road-UserId",
            "in": "header",
            "description": "User identifier whose action initiated the request. This also can be an employee of RIA using some back-end.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "EE39912310123"
          },
          {
            "name": "X-Road-Represented-Party",
            "in": "header",
            "description": "When service client represents third party while issuing a query then it must be filled with identifier of that third party. When service client represents itself then this header is omitted.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "EE12345678"
          },
          {
            "name": "X-Road-Id",
            "in": "header",
            "description": "Unique identifier (UUID) for this message.",
            "schema": {
              "type": "string"
            },
            "example": "123e4567-e89b-12d3-a456-42661417400"
          }
        ],
        "requestBody": {
          "$ref": "#/components/requestBodies/AddMandateTriplet"
        },
        "responses": {
          "201": {
            "description": "The request was fulfilled and the new mandate was created."
          },
          "202": {
            "description": "Accepted for processing but not immediately created."
          },
          "400": {
            "description": "Incorrect format of the payload",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Problem"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden. Request not authorized."
          },
          "422": {
            "description": "Unprocessable request. Something went wrong.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Problem"
                  }
                }
              }
            }
          },
          "501": {
            "description": "This request is not supported."
          }
        }
      }
    },
    "/representees/{representeeId}/delegates/{delegateId}/mandates/{mandateId}/subdelegates": {
      "post": {
        "summary": "Sub-delegate a single mandate",
        "description": "To add a sub-delegate for a specific mandate. The values of representeeId, delegateId and mandateId are taken from the output of the Mandate, from the 'addSubDelegate' link.\n",
        "operationId": "addSubDelegate",
        "parameters": [
          {
            "name": "representeeId",
            "in": "path",
            "description": "Implementator can use any form of representee identifier (like internal person id). Pääsuke takes this value from 'addSubDelegate' link.",
            "required": true,
            "style": "simple",
            "explode": false,
            "schema": {
              "type": "string"
            },
            "example": 1236
          },
          {
            "name": "delegateId",
            "in": "path",
            "description": "Implementator can use any form of delegate identifier (like internal person id). Pääsuke takes this value from 'addSubDelegate' link.",
            "required": true,
            "style": "simple",
            "explode": false,
            "schema": {
              "type": "string"
            },
            "example": 4567
          },
          {
            "name": "mandateId",
            "in": "path",
            "description": "Implementator can use any form of mandate (or role) identifier (like internal mandate id). Pääsuke takes this value from 'addSubDelegate' link.",
            "required": true,
            "style": "simple",
            "explode": false,
            "schema": {
              "type": "string"
            },
            "example": 8923032032
          },
          {
            "name": "X-Road-UserId",
            "in": "header",
            "description": "User identifier whose action initiated the request. This also can be an employee of RIA using some back-end.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "EE39912310123"
          },
          {
            "name": "X-Road-Represented-Party",
            "in": "header",
            "description": "When service client represents third party while issuing a query then it must be filled with identifier of that third party. When service client represents itself then this header is omitted.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "EE12345678"
          },
          {
            "name": "X-Road-Id",
            "in": "header",
            "description": "Unique identifier (UUID) for this message.",
            "schema": {
              "type": "string"
            },
            "example": "123e4567-e89b-12d3-a456-42661417400"
          }
        ],
        "requestBody": {
          "$ref": "#/components/requestBodies/MandateToSubDelegate"
        },
        "responses": {
          "200": {
            "description": "Created"
          },
          "202": {
            "description": "Accepted for processing but yet not added"
          },
          "403": {
            "description": "Forbidden. Request not authorized."
          },
          "404": {
            "description": "Endpoint was not found."
          },
          "422": {
            "description": "Unprocessable request. Something went wrong. If mandate was not found then the system should retrun this response together with translation.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Problem"
                  }
                }
              }
            }
          },
          "500": {
            "description": "Reserved for errors returned by security server."
          },
          "501": {
            "description": "This operation is not supported."
          }
        }
      }
    },
    "/representees/{representeeId}/delegates/{delegateId}/mandates/{mandateId}": {
      "put": {
        "summary": "Edit mandate (by ending the validity of it)",
        "description": "To edit a mandate, currently the only supported action is DELETE which means ending the validity of the mandate. The values of representeeId, delegateId and mandateId are taken from the output of the Mandate, from the delete link.\n",
        "operationId": "editMandate",
        "parameters": [
          {
            "name": "representeeId",
            "in": "path",
            "description": "Implementator can use any form of representee identifier (like internal person id). Pääsuke takes this value from 'delete' link.",
            "required": true,
            "style": "simple",
            "explode": false,
            "schema": {
              "type": "string"
            },
            "example": 100548
          },
          {
            "name": "delegateId",
            "in": "path",
            "description": "Implementator can use any form of delegate identifier (like internal person id). Pääsuke takes this value from 'delete' link.",
            "required": true,
            "style": "simple",
            "explode": false,
            "schema": {
              "type": "string"
            },
            "example": 754864
          },
          {
            "name": "mandateId",
            "in": "path",
            "description": "Implementator can use any form of mandate (or role) identifier (like internal mandate id). Pääsuke takes this value from 'delete' link.",
            "required": true,
            "style": "simple",
            "explode": false,
            "schema": {
              "type": "string"
            },
            "example": 8647
          },
          {
            "name": "X-Road-UserId",
            "in": "header",
            "description": "User identifier whose action initiated the request. This also can be an employee of RIA using some back-end.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "EE39912310123"
          },
          {
            "name": "X-Road-Represented-Party",
            "in": "header",
            "description": "When service client represents third party while issuing a query then it must be filled with identifier of that third party. When service client represents itself then this header is omitted.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "EE12345678"
          },
          {
            "name": "X-Road-Id",
            "in": "header",
            "description": "Unique identifier (UUID) for this message.",
            "schema": {
              "type": "string"
            },
            "example": "123e4567-e89b-12d3-a456-42661417400"
          }
        ],
        "requestBody": {
          "$ref": "#/components/requestBodies/DeleteMandate"
        },
        "responses": {
          "200": {
            "description": "Return additional information about the results of a successful edit (successful withdrawing or waiving)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_200"
                }
              }
            }
          },
          "400": {
            "description": "Invalid parameter"
          },
          "403": {
            "description": "Forbidden. Request not authorized."
          },
          "404": {
            "description": "Resource to delete was not found."
          },
          "422": {
            "description": "Unprocessable request. Something went wrong.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Problem"
                  }
                }
              }
            }
          },
          "500": {
            "description": "This error code is reserved for security server."
          },
          "501": {
            "description": "This operation is not supported."
          }
        }
      }
    },
    "/roles": {
      "get": {
        "summary": "List roles with translations and with information whom this role can be assigned to and on what conditions the role can be assigned or deleted.",
        "description": "When 'If-Modified-Since' is included in the request the service can respond with HTTP Status code 304 if nor roles have been changed since that time. If there have been changes to roles (the provider does not support this parameter) all results (that match the filters) are returned (even the ones that have modified time earlier than If-Modified-Since parameter)\n",
        "operationId": "getRoles",
        "parameters": [
          {
            "name": "If-Modified-Since",
            "in": "header",
            "description": "https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Modified-Since",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2022-10-18T17:32:28+02:00"
            }
          },
          {
            "name": "X-Road-Id",
            "in": "header",
            "description": "Unique identifier (UUID) for this message.",
            "schema": {
              "type": "string"
            },
            "example": "123e4567-e89b-12d3-a456-42661417400"
          }
        ],
        "responses": {
          "200": {
            "description": "<p>RoleDefinitions can have following parameters (mandatory parameters are marked with *)</p>\n<p><b>code*</b> - Unique identifier of the role. The prefix until the first colon is called the role namespace. Max length 4000 characters.</p>\n<p><b>title*</b> - Role title in different languages.</p>\n<p><b>description</b> - Role description in different languages. If the description is provided it must have at least the description translation in Estonian.</p>\n<p><b>delegateType*</b> -  Type of persons this role can be assigned to. Setting delegateType only to LEGAL_PERSON is meant to be used for machine-to-machine roles. For example EMTA has a role \"Käibedeklaratsiooni (KMD) andmete saatmine masin-masin liidese vahendusel (code XT_MM_KMD)\"./p>\n<p><b>representeeType*</b> - Type of representees who can add a mandate with this role.</p>\n<p><b>addableBy</b> - In order to add a mandate with this role the user representing the representee must have a valid mandate with a role in this list. If the value is empty or null, this role cannot be assigned from Pääsuke.</p>\n<p><b>addingMustBeSigned</b> - If this is set as true then the user adding a mandate with this role needs to digitally sign it.</p>\n\n<p><b>subDelegable</b> - System checks this value during adding a mandate. Possible values:<ul>\n      <li>\"NO\" - a mandate with this role can not be added with the right to further sub-delegate it.</li>\n      <li>\"YES\" - the system forces the user to add new mandates with this role with the right to further sub-delegate them.</li>\n      <li>\"ASK\" - the user chan choose during adding if further sub-delegating is allowed or not.</li>\n      <li>\"LEGAL_PERSON_YES__NATURAL_PERSON_ASK\" - If delegate is a legal person then system forces the user to allow further sub-delegating the mandate. If delegate is a natural person then the user can choose if further sub-delegating the mandate is allowed.</li>\n      <li>\"LEGAL_PERSON_YES__NATURAL_PERSON_NO\" - If delegate is a legal person then system forces the user to allow further sub-delegating the mandate. If delegate is a natural person then the user cannot add the mandate with the right to further sub-delegate it.</li>\n    </ul></p>\n<p><b>subDelegateType</b> - Type of persons this role can be sub-delegated to. This should have a value if subDelegable != 'NO' and normally (except in rare corner cases) the value will be NATURAL_PERSON.</p>\n<p><b>subDelegableBy</b> - In order to add a sub-delegate for a mandate with this role or to withdraw a sub-delegated mandate the user representing the delegate of this mandate must have a valid mandate with a role in this list. This should have a value if subDelegable != 'NO'.</p>\n<p><b>subDelegatingMustBeSigned</b> - If this is set as true and the user is adding a sub-delegate for a mandate with this role then the user needs to digitally sign it.</p>\n<p><b>waivableBy</b> - The user representing the delegate must have a valid mandate with a role in the list to waive this mandate from the delegate side (volitusest loobumine). If this is set to null or to an empty list then this mandate cannot be waived.</p>\n<p><b>waivingMustBeSigned</b> - If this is set true then the delegate has to digitally sign when the delegate (volituse saaja) wants to waive the mandate (volitusest loobumine).</p>\n\n<p><b>withdrawableBy</b> - The user representing the representee must have a mandate with a role in the list to withdraw this mandate from the representee side (volituse tagasivõtmine). This should have a value if subDelegable != 'NO'.</p>\n<p><b>withdrawalMustBeSigned</b> - If this is set true then the representee (or the person representing the representee) has to digitally sign when he wants to withdraw the mandate (volituse tagasivõtmine).</p>\n\n<h3>Configuration parameters for specific use-cases</h3>\n<p><i>Normally configuring these parameters is not needed and can be left empty (or false for booleans).</i></p>\n<p><b>addableOnlyIfRepresenteeHasRoleIn</b> - Defining this list is used in rare cases where in order to assign the role, the representee also must have at least one mandate with a role in this list. For example to add some PRIA role the user representing the representee must have a role in the addableBy list and the representee must have the role \"PRIA:PRIA.customer\"</p>\n<p><b>delegateMustEqualToRepresenteeOnAdd</b> - If this is set to true then only the administrator can create the initial mandate and the legal person can sub-delegate it further (to its employees). This parameter is for use-cases where not anyone has the right to use the service but administrator adds the initial mandate that can be further sub-delegated. For such mandates the subDelegable must be set to YES.</p>\n<p><b>hidden</b> - Mandates with hidden roles are not shown in Pääsuke UI. A hidden role is a method to add extra information about the person. For example, we could create a role AA with property addableBy=BB, hidden=false. Now we can create hidden role BB and we can add a mandate with the role BB to persons who are allowed to add role AA. False by default. If hidden is set to true then all of the role properties are ignored.</p>\n<p><b>representeeIdentifierIn</b> - New mandates with this role code can only be created for representees in this list. This parameter only has an effect if it is not null and not empty.</p>\n<p><b>validityPeriodFromNotInFuture</b> - If true then Pääsuke UI restricts setting validityPeriod.from into the future when adding a new mandate. If adding a sub-delegate is allowed then this check is also applied when adding a sub-delegate.</p>\n<p><b>validityPeriodThroughMustBeUndefined</b> - If true then Pääsuke UI forces setting validityPeriod.through to infinity. If adding a sub-delegate is allowed then this check is also applied when adding a sub-delegate.</p>\n",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RoleDefinition"
                  }
                }
              }
            }
          },
          "304": {
            "description": "List of roles is not modified. Might be returned only if request sent additional header \"If-Modified-Since\" and no changes have been done since that date."
          },
          "403": {
            "description": "Forbidden. Request not authorized."
          },
          "503": {
            "description": "Service is temporarily unavailable"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "MandateTriplet": {
        "required": [
          "delegate",
          "mandates",
          "representee"
        ],
        "type": "object",
        "properties": {
          "representee": {
            "$ref": "#/components/schemas/Person"
          },
          "delegate": {
            "$ref": "#/components/schemas/Person"
          },
          "mandates": {
            "type": "array",
            "description": "Mandates",
            "items": {
              "$ref": "#/components/schemas/Mandate"
            }
          }
        }
      },
      "Person": {
        "required": [
          "identifier",
          "type"
        ],
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "Person type",
            "enum": [
              "NATURAL_PERSON",
              "LEGAL_PERSON",
              "UNKNOWN",
              "OTHER"
            ]
          },
          "firstName": {
            "type": "string",
            "description": "Person given name(s)",
            "format": "string",
            "example": "Jüri"
          },
          "surname": {
            "type": "string",
            "description": "Person surname",
            "format": "string",
            "example": "Juurikas"
          },
          "legalName": {
            "type": "string",
            "description": "Name of legal entity",
            "format": "string",
            "example": "Juurikas"
          },
          "identifier": {
            "type": "string",
            "description": "Identity code",
            "example": "EE38302250123"
          }
        }
      },
      "Mandate": {
        "required": [
          "role"
        ],
        "type": "object",
        "properties": {
          "role": {
            "type": "string",
            "description": "Role",
            "format": "string",
            "example": "AGENCY-Q:Edit"
          },
          "validityPeriod": {
            "$ref": "#/components/schemas/ValidityPeriod"
          },
          "links": {
            "$ref": "#/components/schemas/MandateLinks"
          },
          "subDelegable": {
            "type": "boolean",
            "description": "True if this mandate was created with the right to futher sub-delegate it."
          },
          "subDelegatorIdentifier": {
            "type": "string",
            "description": "Identifier of the person who created this mandate through sub-delegation.",
            "example": "EE12345678"
          }
        }
      },
      "ValidityPeriod": {
        "type": "object",
        "properties": {
          "from": {
            "type": "string",
            "description": "First day of being in effect. If null then is already valid or becomes valid immediately after being added.",
            "format": "date",
            "example": "2028-01-01"
          },
          "through": {
            "type": "string",
            "description": "Valid through (last day is inclusive). If no value is set (null) then valid indefinitely.",
            "format": "date",
            "example": "2030-12-31"
          }
        },
        "description": "Planned validity period of the mandate."
      },
      "MandateLinks": {
        "type": "object",
        "properties": {
          "delete": {
            "type": "string",
            "example": "/v1/nss/{ns}/representees/{representeeId}/delegates/{delegateId}/mandates/{mandateId}"
          },
          "addSubDelegate": {
            "type": "string",
            "example": "/v1/nss/{ns}/representees/{representee}/delegates/{delegate}/mandates/{mandateId}/subdelegates"
          },
          "origin": {
            "type": "string",
            "example": "https://vaarikas.emta.ee/view/123"
          }
        }
      },
      "Problem": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "An absolute URI that identifies the problem type",
            "format": "uri",
            "default": "about:blank"
          },
          "href": {
            "type": "string",
            "description": "An absolute URI that, when dereferenced, provides human-readable documentation for the problem type (e.g. using HTML).",
            "format": "uri"
          },
          "title": {
            "type": "string",
            "description": "A short summary of the problem type. Written in English and readable for engineers (usually not suited for non technical stakeholders and not localized).",
            "example": "Service Unavailable"
          },
          "translation": {
            "$ref": "#/components/schemas/Translation"
          },
          "instance": {
            "type": "string",
            "description": "Reference that identifies the specific occurrence of the problem. UI should display this without dashes.",
            "format": "uri"
          }
        },
        "description": "A Problem Details object (RFC 7807)",
        "example": {
          "type": "urn:problem-type:ee.ria.pääsuke:mandateDeletingFailed",
          "href": "https://www.ria.ee/specification/rest/api-guide/problems/payloadTooLarge.html",
          "title": "Deleting of the role failed",
          "translation": {
            "et": "Volituse kustutamine ebaõnnestus",
            "en": "Deleting of the mandate failed",
            "ru": "Volituse kustutamine ebaõnnestus (ru)"
          },
          "instance": "urn:uuid:123e4567-e89b-12d3-a456-426614174000"
        }
      },
      "Translation": {
        "required": [
          "et"
        ],
        "type": "object",
        "properties": {
          "et": {
            "type": "string",
            "description": "Translation in Estonian",
            "example": "Tere"
          },
          "en": {
            "type": "string",
            "description": "Translation in English",
            "example": "Hello"
          },
          "ru": {
            "type": "string",
            "description": "Translation in Russian",
            "example": "Привет"
          }
        }
      },
      "AddMandateTriplet": {
        "required": [
          "delegate",
          "mandates",
          "representee"
        ],
        "type": "object",
        "properties": {
          "representee": {
            "$ref": "#/components/schemas/Person"
          },
          "delegate": {
            "$ref": "#/components/schemas/Person"
          },
          "mandate": {
            "$ref": "#/components/schemas/MandateToAdd"
          },
          "authorizations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Authorization"
            }
          },
          "document": {
            "$ref": "#/components/schemas/Document"
          }
        },
        "description": "Delegate is optional (in case company gets deleted then updating is needed)."
      },
      "MandateToAdd": {
        "required": [
          "role"
        ],
        "type": "object",
        "properties": {
          "role": {
            "maxLength": 4000,
            "pattern": "^\\S+\\:\\S+$",
            "type": "string",
            "description": "Role code",
            "format": "string",
            "example": "GLOBAL1_EMTA:ACCOUNTANT"
          },
          "canSubDelegate": {
            "type": "boolean",
            "description": "Can this role be given out with the right to sub-delegate it."
          },
          "validityPeriod": {
            "$ref": "#/components/schemas/ValidityPeriod"
          }
        }
      },
      "Authorization": {
        "type": "object",
        "properties": {
          "userIdentifier": {
            "type": "string",
            "example": "EE39912310123"
          },
          "hasRole": {
            "type": "string",
            "description": "List of roles the user had",
            "example": "BR_REPRIGHT:SOLEREP"
          }
        },
        "description": "On what grounds did Pääsuke allow the user to perform this addition"
      },
      "Document": {
        "type": "object",
        "properties": {
          "uuid": {
            "type": "string",
            "description": "Unique identifier that points to the signed document",
            "format": "uuid",
            "example": "5b72e01c-fa7f-479c-b014-cc19efe5b732"
          },
          "singleDelegate": {
            "type": "boolean",
            "description": "True in case the signed document contains information about a single delegate and it is safe to reveal the document to the delegate. False means that the signed contaier contains information about multiple delegates and it is only safe to reveal it to the representee."
          }
        },
        "description": "If the operation was digitally signed then a document was created. This provides information about the signed container."
      },
      "MandateToSubDelegate": {
        "type": "object",
        "properties": {
          "subDelegate": {
            "$ref": "#/components/schemas/Person"
          },
          "validityPeriod": {
            "$ref": "#/components/schemas/ValidityPeriod"
          },
          "authorizations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Authorization"
            }
          },
          "document": {
            "$ref": "#/components/schemas/Document"
          }
        }
      },
      "DeleteMandate": {
        "required": [
          "action"
        ],
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "description": "If the person who gave the mandate (representee) is ending the validity of the mandate then the action is set to 'DELETE_WITHDRAW'. If the mandate is being ended by the person who was the delegate of the mandate then the action is set to 'DELETE_WAIVE'.",
            "example": "DELETE_WITHDRAW",
            "enum": [
              "DELETE_WITHDRAW",
              "DELETE_WAIVE"
            ]
          },
          "authorizations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Authorization"
            }
          },
          "document": {
            "$ref": "#/components/schemas/Document"
          }
        },
        "description": "End the validity of a mandate. When document is not null it means that it was digitally signed by the persons in the authorizations list."
      },
      "DeletedSubDelegateMandate": {
        "type": "object",
        "properties": {
          "subDelegate": {
            "$ref": "#/components/schemas/Person"
          },
          "validityPeriod": {
            "$ref": "#/components/schemas/ValidityPeriod"
          }
        },
        "description": "When withdrawing/waiving a mandate that has been further sub-delegated the sub-delegated mandates must also be deleted toghether with the original mandate. This object is used to return information about a sub-delegated mandate that was deleted automatically. Field <b>subDelegate</b> is the person the mandate was sub-delegated to. Field <b>validityPeriod</b> is the planned validity period of the mandate"
      },
      "RoleDefinition": {
        "required": [
          "code",
          "delegateType",
          "representeeType",
          "subDelegable",
          "title"
        ],
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "Namespace code + \":\" + role code. Role code can contain any UTF-8 character (even spaces and colons).",
            "format": "string",
            "example": "STAT_ESTAT:Respondent"
          },
          "title": {
            "$ref": "#/components/schemas/Translation"
          },
          "addableBy": {
            "type": "array",
            "description": "In order to add a mandate with this role the user representing the representee must have a valid mandate with a role in this list. If the value is empty or null, this role cannot be assigned from Pääsuke. If the role is configured so that representeeType has the value NATURAL_PERSON in it then add \"NAT_REPRIGHT:SOLEREP\" to this list - this value indicates that a natural person (as a representee) is allowed to add a mandate with this role if the natural person adding the mandate has the right to represent oneself (kui volituse andja teovõime ei ole piiratud).",
            "example": [
              "BR_REPRIGHT:SOLEREP",
              "EMTA:I"
            ],
            "items": {
              "type": "string"
            }
          },
          "addableOnlyIfRepresenteeHasRoleIn": {
            "type": "array",
            "description": "Defining this list is used in rare cases where in order to assign the role, the <u>representee</u> also must have at least one mandate with a role in this list. For example to add some PRIA role the user representing the <u>representee</u> must have a role in the addableBy list and the representee must have the role \"PRIA:PRIA.customer\"",
            "example": [
              "PRIA:PRIA.customer"
            ],
            "items": {
              "type": "string"
            }
          },
          "addingMustBeSigned": {
            "type": "boolean",
            "description": "If this is set as true then the user adding a mandate with this role needs to digitally sign it"
          },
          "delegateType": {
            "type": "array",
            "description": "Type of persons this role can be assigned to. Setting delegateType only to LEGAL_PERSON is meant to be used for machine-to-machine roles. For example EMTA has a role \"Käibedeklaratsiooni (KMD) andmete saatmine masin-masin liidese vahendusel (kood XT_MM_KMD)\".",
            "items": {
              "type": "string",
              "example": "NATURAL_PERSON",
              "enum": [
                "LEGAL_PERSON",
                "NATURAL_PERSON"
              ]
            }
          },
          "delegateMustEqualToRepresenteeOnAdd": {
            "type": "boolean",
            "description": "If this is set to true then only the administrator can create the initial mandate and the legal person can sub-delegate it further (to its employees). This parameter is for use-cases where not anyone has the right to use the service but administrator adds the initial mandate that can be further sub-delegated. For such mandates the subDelegable must be set to YES."
          },
          "description": {
            "$ref": "#/components/schemas/Translation"
          },
          "hidden": {
            "type": "boolean",
            "description": "Mandates with hidden roles are not shown in Pääsuke UI. A hidden role is a method to add extra information about the person. For example, we could create a role AA with property addableBy=BB, hidden=false. Now we can create hidden role BB and we can add a mandate with the role BB to persons who are allowed to add role AA. False by default. If hidden is set to true then all of the role properties (except 'code') are ignored."
          },
          "representeeIdentifierIn": {
            "type": "array",
            "description": "New mandates with this role code can only be created for representees in this list. This parameter only has an effect if it is not null and not empty.",
            "example": [
              "EE70006317",
              "EE70003218"
            ],
            "items": {
              "type": "string"
            }
          },
          "representeeType": {
            "type": "array",
            "description": "Type of representees who can add a mandate with this role.",
            "example": [
              "LEGAL_PERSON",
              "NATURAL_PERSON"
            ],
            "items": {
              "type": "string",
              "enum": [
                "LEGAL_PERSON",
                "NATURAL_PERSON"
              ]
            }
          },
          "subDelegable": {
            "type": "string",
            "description": "System checks this value during adding a mandate. <ul> <li>\"NO\" - a mandate with this role can not be added with the right to further sub-delegate it.</li>\n<li>\"YES\" - the system forces the user to add new mandates with this role with the right to further sub-delegate them.</li>\n<li>\"ASK\" - the user chan choose during adding if further sub-delegating is allowed or not.</li>\n<li>\"LEGAL_PERSON_YES__NATURAL_PERSON_ASK\" - If delegate is a legal person then system forces the user to allow further sub-delegating the mandate. If delegate is a natural person then the user can choose if further sub-delegating the mandate is allowed.</li>\n<li>\"LEGAL_PERSON_YES__NATURAL_PERSON_NO\" - If delegate is a legal person then system forces the user to allow further sub-delegating the mandate. If delegate is a natural person then the user cannot add the mandate with the right to further sub-delegate it.</li> </ul>",
            "enum": [
              "true",
              "false",
              "ASK",
              "LEGAL_PERSON_YES__NATURAL_PERSON_ASK",
              "LEGAL_PERSON_YES__NATURAL_PERSON_NO"
            ]
          },
          "subDelegateType": {
            "type": "array",
            "description": "Type of persons this role can be sub-delegated to. Defaults to NATURAL_PERSON (if canSubDelegate is set as true).",
            "items": {
              "type": "string",
              "example": "NATURAL_PERSON",
              "enum": [
                "LEGAL_PERSON",
                "NATURAL_PERSON"
              ]
            }
          },
          "subDelegableBy": {
            "type": "array",
            "description": "In order to add a sub-delegate for a mandate with this role or to withdraw a sub-delegated mandate the user representing the delegate of this mandate must have a valid mandate with a role in this list. This should have a value if subDelegable != 'NO'",
            "example": [
              "BR_REPRIGHT:SOLEREP",
              "EMTA:I"
            ],
            "items": {
              "type": "string"
            }
          },
          "subDelegatingMustBeSigned": {
            "type": "boolean",
            "description": "If this is set as true and the user is adding a sub-delegate for a mandate with this role then the user needs to digitally sign it."
          },
          "validityPeriodFromNotInFuture": {
            "type": "boolean",
            "description": "If true then Pääsuke UI restricts setting validityPeriod.from into the future when adding a new mandate. If adding a sub-delegate is allowed then this check is also applied when adding a sub-delegate."
          },
          "validityPeriodThroughMustBeUndefined": {
            "type": "boolean",
            "description": "If true then Pääsuke UI forces setting validityPeriod.through to infinity. If adding a sub-delegate is allowed then this check is also applied when adding a sub-delegate."
          },
          "waivableBy": {
            "type": "array",
            "description": "The user representing the delegate must have a valid mandate with a role in the list to waive this mandate from the delegate side (volitusest loobumine). If this is set to an empty list then this mandate cannot be waived. Defaults to addableBy.",
            "example": [
              "BR_REPRIGHT:SOLEREP",
              "NAT_REPRIGHT:SOLEREP",
              "EMTA:I"
            ],
            "items": {
              "type": "string"
            }
          },
          "waivingMustBeSigned": {
            "type": "boolean",
            "description": "If this is set true then the delegate has to digitally sign when the delegate (volituse saaja) wants to waive the mandate (volitusest loobumine)."
          },
          "withdrawableBy": {
            "type": "array",
            "description": "The user representing the representee must have a mandate with a role in the list to withdraw this mandate from the representee side (volituse tagasivõtmine). If this is set to an empty list then this mandate cannot be withdrawn. Defaults to addableBy.",
            "example": [
              "BR_REPRIGHT:SOLEREP",
              "EMTA:I"
            ],
            "items": {
              "type": "string"
            }
          },
          "withdrawalMustBeSigned": {
            "type": "boolean",
            "description": "If this is set true then the representee (or the person representing the representee) has to digitally sign when he wants to withdraw the mandate (volituse tagasivõtmine)."
          }
        }
      },
      "inline_response_200": {
        "type": "object",
        "properties": {
          "deletedSubDelegatedMandates": {
            "type": "array",
            "description": "List of mandates that were deleted additionally (if any). If a mandate was withdrawn/waived and this mandate was further sub-delegated then the sub-delegated mandates must be deleted in the same transaction. This is the list of mandates that were automatically deleted additionally.",
            "items": {
              "$ref": "#/components/schemas/DeletedSubDelegateMandate"
            }
          }
        }
      }
    },
    "responses": {
      "MandateTriplets": {
        "description": "MandateTriplets that match query parameters. If there are no mandates to return for this representee or delegate then empty list should be returned. MandateTriplet consists of 3 parts&colon;\n<ol>\n  <li>representee (volitaja)</li>\n  <li>delegate (volitatu)</li>\n  <li>list of mandates that are currently valid or become valid in the future.</li></ol>\nProperties of a mandate:\n<ul>\n  <li><b>role</b></li>\n  <li><b>validityPeriod</b> - if this value is present it must have either validFrom, validThrough or both. If the valid through date is in the past the mandate must not be returned at all. The value of validThrough must be to the last date the mandate is valid (like 31.12.2029). If the mandate is valid indefinitely then validThrough must be omitted.</li>\n  <li><b>subDelegable</b> - true if this mandate was created with the right to futher sub-delegate it, false otherwise.</li>\n  <li><b>subDelegatorIdentifier</b> - precence of this value indicates that this mandate has been created by adding a sub-delegate to some other mandate. The value of this property indicates who was the delegate of the original mandate.</li>\n  </ul>\n",
        "content": {
          "application/json": {
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/MandateTriplet"
              }
            },
            "example": [
              {
                "representee": {
                  "type": "LEGAL_PERSON",
                  "legalName": "Väikefirma OÜ",
                  "identifier": "EE12345678"
                },
                "delegate": {
                  "type": "NATURAL_PERSON",
                  "firstName": "Jüri",
                  "surname": "Juurikas",
                  "identifier": "EE38302250123"
                },
                "mandates": [
                  {
                    "role": "EMTA:HAMPI",
                    "validityPeriod": {
                      "from": "2017-07-21",
                      "through": "2028-12-31"
                    },
                    "subDelegable": false,
                    "subDelegatorIdentifier": "EE12345678",
                    "links": {
                      "delete": "/v1/nss/EMTA/representees/int-EE12345678/delegates/int-EE38302250123/mandates/int-mandate-123",
                      "addSubDelegate": "/v1/nss/EMTA/representees/int-EE12345678/delegates/int-EE38302250123/mandates/int-mandate-123/subdelegates",
                      "origin": "https://vaarikas.emta.ee/view/int-mandate-123"
                    }
                  },
                  {
                    "role": "PAASUKE_EXTERNAL:PRIA:unrestricted",
                    "validityPeriod": {
                      "from": "2017-07-21",
                      "through": "2028-12-31"
                    },
                    "hidden": true
                  }
                ]
              }
            ]
          }
        }
      },
      "EditMandateResult": {
        "description": "Return additional information about the results of a successful edit (successful withdrawing or waiving)",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/inline_response_200"
            }
          }
        }
      },
      "RoleDefinitions": {
        "description": "<p>RoleDefinitions can have following parameters (mandatory parameters are marked with *)</p>\n<p><b>code*</b> - Unique identifier of the role. The prefix until the first colon is called the role namespace. Max length 4000 characters.</p>\n<p><b>title*</b> - Role title in different languages.</p>\n<p><b>description</b> - Role description in different languages. If the description is provided it must have at least the description translation in Estonian.</p>\n<p><b>delegateType*</b> -  Type of persons this role can be assigned to. Setting delegateType only to LEGAL_PERSON is meant to be used for machine-to-machine roles. For example EMTA has a role \"Käibedeklaratsiooni (KMD) andmete saatmine masin-masin liidese vahendusel (code XT_MM_KMD)\"./p>\n<p><b>representeeType*</b> - Type of representees who can add a mandate with this role.</p>\n<p><b>addableBy</b> - In order to add a mandate with this role the user representing the representee must have a valid mandate with a role in this list. If the value is empty or null, this role cannot be assigned from Pääsuke.</p>\n<p><b>addingMustBeSigned</b> - If this is set as true then the user adding a mandate with this role needs to digitally sign it.</p>\n\n<p><b>subDelegable</b> - System checks this value during adding a mandate. Possible values:<ul>\n      <li>\"NO\" - a mandate with this role can not be added with the right to further sub-delegate it.</li>\n      <li>\"YES\" - the system forces the user to add new mandates with this role with the right to further sub-delegate them.</li>\n      <li>\"ASK\" - the user chan choose during adding if further sub-delegating is allowed or not.</li>\n      <li>\"LEGAL_PERSON_YES__NATURAL_PERSON_ASK\" - If delegate is a legal person then system forces the user to allow further sub-delegating the mandate. If delegate is a natural person then the user can choose if further sub-delegating the mandate is allowed.</li>\n      <li>\"LEGAL_PERSON_YES__NATURAL_PERSON_NO\" - If delegate is a legal person then system forces the user to allow further sub-delegating the mandate. If delegate is a natural person then the user cannot add the mandate with the right to further sub-delegate it.</li>\n    </ul></p>\n<p><b>subDelegateType</b> - Type of persons this role can be sub-delegated to. This should have a value if subDelegable != 'NO' and normally (except in rare corner cases) the value will be NATURAL_PERSON.</p>\n<p><b>subDelegableBy</b> - In order to add a sub-delegate for a mandate with this role or to withdraw a sub-delegated mandate the user representing the delegate of this mandate must have a valid mandate with a role in this list. This should have a value if subDelegable != 'NO'.</p>\n<p><b>subDelegatingMustBeSigned</b> - If this is set as true and the user is adding a sub-delegate for a mandate with this role then the user needs to digitally sign it.</p>\n<p><b>waivableBy</b> - The user representing the delegate must have a valid mandate with a role in the list to waive this mandate from the delegate side (volitusest loobumine). If this is set to null or to an empty list then this mandate cannot be waived.</p>\n<p><b>waivingMustBeSigned</b> - If this is set true then the delegate has to digitally sign when the delegate (volituse saaja) wants to waive the mandate (volitusest loobumine).</p>\n\n<p><b>withdrawableBy</b> - The user representing the representee must have a mandate with a role in the list to withdraw this mandate from the representee side (volituse tagasivõtmine). This should have a value if subDelegable != 'NO'.</p>\n<p><b>withdrawalMustBeSigned</b> - If this is set true then the representee (or the person representing the representee) has to digitally sign when he wants to withdraw the mandate (volituse tagasivõtmine).</p>\n\n<h3>Configuration parameters for specific use-cases</h3>\n<p><i>Normally configuring these parameters is not needed and can be left empty (or false for booleans).</i></p>\n<p><b>addableOnlyIfRepresenteeHasRoleIn</b> - Defining this list is used in rare cases where in order to assign the role, the representee also must have at least one mandate with a role in this list. For example to add some PRIA role the user representing the representee must have a role in the addableBy list and the representee must have the role \"PRIA:PRIA.customer\"</p>\n<p><b>delegateMustEqualToRepresenteeOnAdd</b> - If this is set to true then only the administrator can create the initial mandate and the legal person can sub-delegate it further (to its employees). This parameter is for use-cases where not anyone has the right to use the service but administrator adds the initial mandate that can be further sub-delegated. For such mandates the subDelegable must be set to YES.</p>\n<p><b>hidden</b> - Mandates with hidden roles are not shown in Pääsuke UI. A hidden role is a method to add extra information about the person. For example, we could create a role AA with property addableBy=BB, hidden=false. Now we can create hidden role BB and we can add a mandate with the role BB to persons who are allowed to add role AA. False by default. If hidden is set to true then all of the role properties are ignored.</p>\n<p><b>representeeIdentifierIn</b> - New mandates with this role code can only be created for representees in this list. This parameter only has an effect if it is not null and not empty.</p>\n<p><b>validityPeriodFromNotInFuture</b> - If true then Pääsuke UI restricts setting validityPeriod.from into the future when adding a new mandate. If adding a sub-delegate is allowed then this check is also applied when adding a sub-delegate.</p>\n<p><b>validityPeriodThroughMustBeUndefined</b> - If true then Pääsuke UI forces setting validityPeriod.through to infinity. If adding a sub-delegate is allowed then this check is also applied when adding a sub-delegate.</p>\n",
        "content": {
          "application/json": {
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/RoleDefinition"
              }
            }
          }
        }
      }
    },
    "parameters": {
      "subDelegatedByForDelegateRepresenteesQuery": {
        "name": "subDelegatedBy",
        "in": "query",
        "description": "<p><b>To add a filter to results so that only mandates that were sub-delegated to the delegate by this person (edasivolitaja) would be returned.</b></p>\n<p>This is to cover the following use case. Let's say LittleCompany and BigCompany are customers of BookkeepingCompany and have created some mandates to this company together with the right for BookkeepingCompany to further sub-delegate the mandates to its employees. BookkeepingCompany has further sub-delegated mandates to some of its employees.</p>\n<p>BookkeepingCompany can use this query to find out for an employee what kind of customer mandates have been sub-delegated to that employee.</p>\n<p>To display this list Pääsuke makes a query  where delegate={EmployeeIdentifier} and subDelegatedBy={BookkeepingCompanyIdentifier}.</p>",
        "required": false,
        "schema": {
          "type": "string"
        },
        "example": "EE10391132"
      },
      "X-Road-UserId": {
        "name": "X-Road-UserId",
        "in": "header",
        "description": "User identifier whose action initiated the request. This also can be an employee of RIA using some back-end.",
        "required": false,
        "schema": {
          "type": "string"
        },
        "example": "EE39912310123"
      },
      "X-Road-Represented-Party": {
        "name": "X-Road-Represented-Party",
        "in": "header",
        "description": "When service client represents third party while issuing a query then it must be filled with identifier of that third party. When service client represents itself then this header is omitted.",
        "required": false,
        "schema": {
          "type": "string"
        },
        "example": "EE12345678"
      },
      "X-Road-Id": {
        "name": "X-Road-Id",
        "in": "header",
        "description": "Unique identifier (UUID) for this message.",
        "schema": {
          "type": "string"
        },
        "example": "123e4567-e89b-12d3-a456-42661417400"
      },
      "subDelegatedByForRepresenteeDelegatesQuery": {
        "name": "subDelegatedBy",
        "in": "query",
        "description": "<p><b>To add a filter to results so that only mandates that were sub-delegated by this person (edasivolitaja) would be returned.</b></p>\n<p>This is to cover the following use case. Let's say LittleCompany has given BookkeepingCompany some role together with the right for BookkeepingCompany to further sub-delegate the role to its employees.</p>\n<p>BookkeepingCompany can use this query to get the list of its employees who have received this role from BookkeepingCompany through sub-delegation.</p>\n<p>To display this list Pääsuke makes a query  where representee={LittleCompanyIdentifier} and subDelegatedBy={BookkeepingCompanyIdentifier}.</p>",
        "required": false,
        "schema": {
          "type": "string"
        },
        "example": "EE10391132"
      },
      "If-Modified-Since": {
        "name": "If-Modified-Since",
        "in": "header",
        "description": "https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Modified-Since",
        "required": false,
        "schema": {
          "type": "string",
          "format": "date-time",
          "example": "2022-10-18T17:32:28+02:00"
        }
      }
    },
    "requestBodies": {
      "AddMandateTriplet": {
        "description": "Details of the mandate being added.<p><b>Identifier of the representee (volituse andja) and delegate (volitaja)</b> can be one of the follwing&colon;</p><p>a)  'EE' followed by 8-digit legal entity code from Estonian Business Registry (however in reality it is very rarely that the sub-delegate is a company, it is usually a natural person)</p> <p>b) 'EE' followed by 11-digit national identity number</p> <p>c) Two-letter country code followed by eIDAS identification (1...254 symbols) - Pääsuke uses the value that was returned by Tara when the person logged into eesti.ee portal.</p><p>The <b>validityPeriod</b> can be from today and infinite (no through date) or with specific end date.</p><p>The <b>authorizations</b> block informs why Pääsuke came to a conclusin that this user has the authorization to add this mandate. The userIdentifier always points to the acutal natural person who confirmed the action in the user interface.</p>",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/AddMandateTriplet"
            },
            "example": {
              "representee": {
                "type": "LEGAL_PERSON",
                "legalName": "Väikefirma OÜ",
                "identifier": "EE12345678"
              },
              "delegate": {
                "type": "NATURAL_PERSON",
                "firstName": "Jüri",
                "surname": "Juurikas",
                "identifier": "EE38302250123"
              },
              "mandate": {
                "role": "GLOBAL1_EMTA:ACCOUNTANT",
                "canSubDelegate": true,
                "validityPeriod": {
                  "from": "2028-01-01",
                  "through": "2030-12-31"
                }
              },
              "authorizations": [
                {
                  "userIdentifier": "EE49028099999",
                  "hasRole": "BR_REPRIGHT:SOLEREP"
                }
              ],
              "document": {
                "uuid": "5b72e01c-fa7f-479c-b014-cc19efe5b732",
                "singleDelegate": true
              }
            }
          }
        }
      },
      "MandateToSubDelegate": {
        "description": "Details of the person whom the mandate is being sub-delegated, also the validity period and the details why Pääsuke allowed this operation to take place. <p><b>Identifier of the subDelegate (edasivolitatu)</b> can be one of the follwing&colon;</p> <p>a) 'EE' followed by 11-digit national identity number</p> <p>b) Two-letter country code followed by eIDAS identification (1...254 symbols) - Pääsuke uses the value that was returned by Tara when the person logged into eesti.ee portal.</p><p>The sub-delegate cannot be a legal person.</p><p>The <b>validityPeriod</b> can only be within the original validity period and validity period.</p><p>The <b>authorizations</b> block informs why Pääsuke came to a conclusin that this user has the authorization to sub-delegate this mandate. The userIdentifier always points to the acutal natural person who confirmed the action from the user interface.</p><p><b>document</b> - This section is present if the persons listed in authorizations block added their digital signature.</p><p><b>document.uuid</b> Document UUID. This identifier can be used to download the signed container from Pääsuke over x-road.</p><p><b>document.singleDelegate</b> is set to true in case the signed document contains information about a single delegate and it is safe to reveal the document to the delegate. False means that the signed container contains information about multiple delegates and it is only safe to reveal it to the representee and not to any of the delegates.</p>",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/MandateToSubDelegate"
            },
            "example": {
              "subDelegate": {
                "type": "NATURAL_PERSON",
                "firstName": "Jüri",
                "surname": "Juurikas",
                "identifier": "EE38302250123"
              },
              "validityPeriod": {
                "from": "2028-01-01",
                "through": "2030-12-31"
              },
              "authorizations": [
                {
                  "userIdentifier": "EE39912310123",
                  "hasRole": "BR_REPRIGHT:SOLEREP"
                }
              ],
              "document": {
                "uuid": "5b72e01c-fa7f-479c-b014-cc19efe5b732",
                "singleDelegate": true
              }
            }
          }
        }
      },
      "DeleteMandate": {
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/DeleteMandate"
            }
          }
        }
      }
    }
  }
}